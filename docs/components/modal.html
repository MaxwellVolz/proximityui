<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Modal â€“ Proximity UI</title>
  <meta name="htmx-config" content='{"selfRequestsOnly":false}'>
  <link rel="stylesheet" href="../../proximity.css">
  <script src="../../proximity.js"></script>
  <script src="https://unpkg.com/htmx.org@2.0.4"></script>
</head>
<body>

<main class="container">
  <h1>Modal</h1>

  <p>
    Display content in a layer above the main page, requiring user interaction before proceeding.
  </p>

  <p>
    <strong>Note:</strong> Modals require proximity.js for full functionality (focus trapping, keyboard handling, click-outside).
  </p>

  <h2>Basic</h2>

  <button class="btn primary" data-modal="modal-basic">Open Modal</button>

  <div class="modal" id="modal-basic">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Modal Title</h2>
        <button class="modal-close" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>This is a basic modal dialog. It demonstrates the fundamental structure and behavior of modals in Proximity UI.</p>
        <p>Click outside the modal, press Escape, or click the close button to dismiss.</p>
      </div>
      <div class="modal-footer">
        <button class="btn primary">Confirm</button>
        <button class="btn" data-modal-close>Cancel</button>
      </div>
    </div>
  </div>

  <h2>Confirmation Dialog</h2>

  <button class="btn danger" data-modal="modal-confirm">Delete Item</button>

  <div class="modal" id="modal-confirm">
    <div class="modal-backdrop"></div>
    <div class="modal-content" style="max-width: 400px;">
      <div class="modal-header">
        <h2 class="modal-title">Confirm Deletion</h2>
        <button class="modal-close" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this item? This action cannot be undone.</p>
      </div>
      <div class="modal-footer">
        <button class="btn danger">Delete</button>
        <button class="btn" data-modal-close>Cancel</button>
      </div>
    </div>
  </div>

  <h2>Form in Modal</h2>

  <button class="btn primary" data-modal="modal-form">Add User</button>

  <div class="modal" id="modal-form">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Create New User</h2>
        <button class="modal-close" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div style="margin-bottom: var(--space-lg);">
            <label class="form-label" for="user-name">Name</label>
            <input type="text" id="user-name" class="input" placeholder="Enter full name">
          </div>

          <div style="margin-bottom: var(--space-lg);">
            <label class="form-label" for="user-email">Email</label>
            <input type="email" id="user-email" class="input" placeholder="user@example.com">
          </div>

          <div style="margin-bottom: var(--space-lg);">
            <label class="form-label" for="user-role">Role</label>
            <select id="user-role" class="select">
              <option>User</option>
              <option>Admin</option>
              <option>Editor</option>
            </select>
          </div>

          <div class="checkbox">
            <input type="checkbox" id="send-invite">
            <label for="send-invite">Send invitation email</label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn primary">Create User</button>
        <button class="btn" data-modal-close>Cancel</button>
      </div>
    </div>
  </div>

  <h2>Long Content</h2>

  <button class="btn primary" data-modal="modal-long">View Terms</button>

  <div class="modal" id="modal-long">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Terms and Conditions</h2>
        <button class="modal-close" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
        <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
        <p>Totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
        <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
        <p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.</p>
        <p>Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur.</p>
        <p>Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur.</p>
      </div>
      <div class="modal-footer">
        <button class="btn primary">I Agree</button>
        <button class="btn" data-modal-close>Decline</button>
      </div>
    </div>
  </div>

  <h2>HTMX Example</h2>

  <p>
    This example requires the mock server running on port 8001.
  </p>

  <button
    class="btn primary"
    hx-get="http://localhost:8001/modal"
    hx-target="body"
    hx-swap="beforeend">
    Load Modal via HTMX
  </button>

  <h2>HTML Structure</h2>

  <p>Trigger button:</p>
  <pre style="background: var(--color-surface); padding: var(--space-md); border-radius: var(--border-radius-md); overflow-x: auto;"><code>&lt;button class="btn primary" data-modal="my-modal"&gt;
  Open Modal
&lt;/button&gt;</code></pre>

  <p>Modal markup:</p>
  <pre style="background: var(--color-surface); padding: var(--space-md); border-radius: var(--border-radius-md); overflow-x: auto;"><code>&lt;div class="modal" id="my-modal"&gt;
  &lt;div class="modal-backdrop"&gt;&lt;/div&gt;
  &lt;div class="modal-content"&gt;
    &lt;div class="modal-header"&gt;
      &lt;h2 class="modal-title"&gt;Title&lt;/h2&gt;
      &lt;button class="modal-close" aria-label="Close"&gt;&lt;/button&gt;
    &lt;/div&gt;
    &lt;div class="modal-body"&gt;
      &lt;p&gt;Content here&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="modal-footer"&gt;
      &lt;button class="btn primary"&gt;Confirm&lt;/button&gt;
      &lt;button class="btn" data-modal-close&gt;Cancel&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>

  <h2>JavaScript API</h2>
  <p>The modal JavaScript provides the following enhancements:</p>
  <ul>
    <li><strong>Trigger:</strong> Add <code>data-modal="modal-id"</code> to any button to open that modal</li>
    <li><strong>Close:</strong> Add <code>data-modal-close</code> to buttons inside the modal to close it</li>
    <li><strong>Escape key:</strong> Press Escape to close the modal</li>
    <li><strong>Backdrop click:</strong> Click outside the modal content to close</li>
    <li><strong>Focus trap:</strong> Tab key cycles focus within the modal</li>
    <li><strong>Focus restoration:</strong> Returns focus to the trigger when closed</li>
    <li><strong>Body scroll lock:</strong> Prevents scrolling the page behind the modal</li>
  </ul>

  <h2>Accessibility</h2>
  <ul>
    <li>Modal must have a unique <code>id</code> attribute</li>
    <li>Use a heading element (<code>&lt;h2&gt;</code>) for the modal title</li>
    <li>Close button should have <code>aria-label="Close"</code></li>
    <li>Consider adding <code>role="dialog"</code> and <code>aria-modal="true"</code> to the modal container</li>
    <li>Use <code>aria-labelledby</code> to associate the modal with its title</li>
    <li>Ensure all interactive elements are keyboard accessible</li>
    <li>Focus is trapped within the modal when open</li>
    <li>Focus returns to trigger element when closed</li>
    <li>Escape key closes the modal</li>
  </ul>

  <h2>When to Use</h2>
  <ul>
    <li>Require immediate user attention or action</li>
    <li>Confirm destructive or important actions (delete, submit, etc.)</li>
    <li>Display forms that don't warrant a full page</li>
    <li>Show additional details without leaving the current page</li>
    <li>Present choices that affect the current workflow</li>
  </ul>

  <h2>When Not to Use</h2>
  <ul>
    <li>Complex multi-step processes: Use dedicated pages instead</li>
    <li>Non-critical information: Use inline content or popovers</li>
    <li>When users need to reference content behind the modal</li>
    <li>For persistent UI elements: Use sidebars or panels</li>
    <li>Simple notifications: Use alerts or toasts instead</li>
    <li>On mobile devices for lengthy forms: Consider full-page views</li>
  </ul>

  <h2>Without JavaScript</h2>
  <p>
    Without proximity.js, modals can still work using the <code>open</code> attribute for static display.
    However, you'll lose focus trapping, keyboard shortcuts, and automatic body scroll prevention.
    Consider using a details/summary element or dedicated page as a fallback for critical content.
  </p>
</main>

</body>
</html>
